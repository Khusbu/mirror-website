<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Wait for User to Stop Typing, Using JavaScript | Gregory Schier</title><script>if (window.location.host.indexOf('localhost') !== 0) {
            !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
                analytics.load('psilXaJonhdBrrQRzFErc9VRNDIBR3FT');
                analytics.page()
            }}();
        }</script><script src="https://carnivalapp.io/sites/174/init.js"></script><script>document.addEventListener("DOMContentLoaded", Carnival.init);</script><link rel="alternate" type="application/rss+xml" title="Gregory Schier Blog" href="/rss.xml"><link rel="stylesheet" href="/styles/bootstrap.min.css"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/styles/monokai.css"><link href="//fonts.googleapis.com/css?family=Raleway:200,100,400" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,400,300" rel="stylesheet" type="text/css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192"><link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160"><link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><style>nav a, nav a:hover, header { color:#FFF; }
            #icon-path { fill: #FFF !important; }</style></head><body><div id="wrapper"><div id="main-content"><nav style="color:#FFF"><span class="social pull-right"><a href="https://twitter.com/gregoryschier" title="Gregory Schier Twitter" style="" target="_blank"><i class="fa fa-twitter-square"></i></a> <a href="https://plus.google.com/102509209246537377732?rel=author" title="Gregory Schier Google Plus" style="" target="_blank"><i class="fa fa-google-plus-square"></i></a> <a href="http://www.linkedin.com/profile/view?id=180332858" title="Gregory Schier LinkedIn" style="" target="_blank"><i class="fa fa-linkedin-square"></i></a> <a href="https://github.com/gschier" title="Gregory Schier Github" style="" target="_blank"><i class="fa fa-github-square"></i></a> <a href="/rss.xml" title="Gregory Schier RSS" style="" target="_blank"><i class="fa fa-rss-square"></i></a></span> <a href="/"><svg version="1.1" class="logo" viewbox="0 0 102 102"><g transform="translate(0,-952.36218)"><g transform="matrix(0.92799441,0,0,0.92799159,-294.93182,419.81087)"><path d="m 364.14179,607.98027 c -0.19851,-0.31252 -3.88299,-6.67648 -8.18773,-14.14214 l -7.82681,-13.57392 25.83362,0 25.83362,0 8.10719,14.03754 c 4.45895,7.72064 8.10718,14.08461 8.10718,14.14213 0,0.0575 -11.58888,0.1046 -25.75307,0.1046 l -25.75307,0 -0.36093,-0.56821 z m -30.34535,47.48125 c -5.39384,-9.343 -11.19592,-19.3925 -12.89352,-22.33222 l -3.08654,-5.34495 12.88011,-22.30798 c 7.08407,-12.26938 12.90068,-22.32946 12.92581,-22.35572 0.0767,-0.0801 15.9387,27.48044 16.02316,27.84058 0.0434,0.18498 -2.03801,4.00166 -4.62532,8.48151 -2.5873,4.47986 -4.6569,8.32177 -4.5991,8.53759 0.0578,0.21581 2.1676,3.95462 4.68845,8.30845 2.52085,4.35383 4.58337,8.02832 4.58337,8.16553 0,0.21998 -15.00709,26.41175 -15.78443,27.54846 -0.26345,0.38524 -1.64141,-1.86883 -10.11199,-16.54125 z m 14.57389,19.51802 c 0.0465,-0.13277 3.66431,-6.43983 8.03953,-14.0157 l 7.95495,-13.77431 9.63495,-10e-4 9.63495,-10e-4 4.60818,-8.01808 c 2.53451,-4.40995 4.73811,-8.16099 4.8969,-8.33565 0.22732,-0.25002 3.70715,-0.30373 16.36229,-0.25254 l 16.07357,0.065 -12.83685,22.22336 -12.83685,22.22336 -25.8081,0.0643 c -16.33075,0.0407 -25.77704,-0.0243 -25.72352,-0.17707 z" id="icon-path" style="fill:#fff;fill-opacity:1;stroke:none"></g></g></svg></a><div class="breadcrumbs"><a href="/blog/">Blog</a></div></nav><div class="header-wrapper page-type-blog_post" style="background-image: url('/images/waiting.jpg')"><div class="container"><header style="padding: 8em 0 9em 0"><h1>Wait for User to Stop Typing, Using JavaScript</h1><div class="meta" style="color:#FFF"><time datetime="December 08, 2014" title="December 08, 2014">December 08, 2014</time><div class="author">Gregory Schier</div></div></header></div></div><div class="container page-body"><div class="row"><div class="col-sm-12"><article><section><p>Here&#39;s the scenario. You have a search feature on your website that you want to live-update while the user types. The naive solution would be to execute a search query on every keystroke. This falls apart, however, because the user can usually type faster your server can respond. This makes for a poor user experience and an overloaded server.</p><p>The solution to this is to execute the search only after the user stops typing. I&#39;m going to show you how to implement this in just a few lines of code.</p><h2 id="listen-for-user-input">Listen For User Input</h2><p>Here is some HTML and JavaScript to log the current value of an <code>input</code> whenever the user presses a key. In the real world, this log could just as easily be a function call to execute a search query.</p><pre><code class="lang-html"><div class="highlight"><pre><span class="c">&lt;!-- a simple input box --&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;test-input&quot;</span> <span class="nt">/&gt;</span>
</pre></div>

</code></pre><pre><code class="lang-javascript"><div class="highlight"><pre><span class="c1">// Get the input box</span>
<span class="kd">var</span> <span class="nx">textInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;test-input&#39;</span><span class="p">);</span>

<span class="c1">// Listen for keystroke events</span>
<span class="nx">textInput</span><span class="p">.</span><span class="nx">onkeydown</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Input Value:&#39;</span><span class="p">,</span> <span class="nx">textInput</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

</code></pre><div class="text-center" style="background: #f5f5f5;padding:1em"><h3>Demo 1 – Output on Every Keystroke</h3><input type="text" id="test-input" style="padding: 0.3em 0.7em; margin: 2em 0 1em 0" placeholder="start typing..."><pre>Input Value: &quot;<span id="test-output"></span>&quot;</pre></div><script>(function () {
    var textInput = document.getElementById('test-input');
    var el = document.getElementById('test-output');
    textInput.onkeyup = function (e) {
        el.innerHTML = textInput.value;
    };
})();</script><p>As you can see, there&#39;s nothing wrong with printing a log on every keystroke. It works just fine. However, if that log message was replaced by a network call to make a search query, it would start making too many requests. This would both slow down the UI and potentially overload the server. So how do we fix this?</p><h2 id="wait-for-typing-to-stop">Wait for Typing to Stop</h2><p>In order to execute a chunk of code after the user stops typing we need to know about a few things:</p><p><code>setTimeout(callback, milliseconds)</code> and <code>clearTimeout(timeout)</code></p><p><code>setTimeout</code> is a JavaScript function that executes a function (<code>callback</code>) after a given amount of time has elapsed (<code>milliseconds</code>). <code>clearTimeout</code> is another function that you can use to cancel a timeout if it hasn&#39;t executed yet.</p><p>So how do we use these things to detect when a user stops typing? Here&#39;s some code to show you. Hopefully I&#39;ve added enough comments to make it clear what&#39;s going on.</p><pre><code class="lang-javascript"><div class="highlight"><pre><span class="c1">// Get the input box</span>
<span class="kd">var</span> <span class="nx">textInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;test-input&#39;</span><span class="p">);</span>

<span class="c1">// Init a timeout variable to be used below</span>
<span class="kd">var</span> <span class="nx">timeout</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="c1">// Listen for keystroke events</span>
<span class="nx">textInput</span><span class="p">.</span><span class="nx">onkeyup</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Clear the timeout if it has already been set.</span>
    <span class="c1">// This will prevent the previous task from executing</span>
    <span class="c1">// if it has been less than &lt;MILLISECONDS&gt;</span>
    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>

    <span class="c1">// Make a new timeout set to go off in 800ms</span>
    <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Input Value:&#39;</span><span class="p">,</span> <span class="nx">textInput</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">500</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

</code></pre><div class="text-center" style="background: #f5f5f5;padding:1em"><h3>Demo 2 – Output when Typing Stops</h3><input type="text" id="test-input-2" style="padding: 0.3em 0.7em; margin: 2em 0 1em 0" placeholder="start typing..."><pre>Input Value: &quot;<span id="test-output-2"></span>&quot;</pre></div><script>(function () {
    var textInput = document.getElementById('test-input-2');
    var el = document.getElementById('test-output-2');
    var timeout = null;

    textInput.onkeyup = function (e) {
        clearTimeout(timeout);
        timeout = setTimeout(function () { el.innerHTML = textInput.value; }, 500);
    };
})();</script><p>As you can see in the demo above, nothing is outputted until no key presses have happened for 500 milliseconds. Exactly what we wanted.</p><h2 id="wrap-up">Wrap-Up</h2><p>That&#39;s it. All it takes to delay execution while typing is 5 lines of code. Feel free to ask questions on <a href="https://twitter.com/gregoryschier">Twitter</a> or <a href="https://plus.google.com/102509209246537377732">Google Plus</a> if you have any.</p></section><footer><div class="text-center"><h4 class="spaced">Share this Post <i class="fa fa-smile-o"></i></h4><span class="social-sharing"><a href="http://twitter.com/share?url=http%3A%2F%2Fschier.co%2Fblog%2F2014%2F12%2F08%2Fwait-for-user-to-stop-typing-using-javascript.html&text=Wait%20for%20User%20to%20Stop%20Typing%2C%20Using%20JavaScript&via=GregorySchier" title="Share on Twitter" target="_blank" class="btn bg-twitter"><i class="fa fa-twitter"></i></a> <a href="http://reddit.com/submit?url=http%3A%2F%2Fschier.co%2Fblog%2F2014%2F12%2F08%2Fwait-for-user-to-stop-typing-using-javascript.html&title=Wait%20for%20User%20to%20Stop%20Typing%2C%20Using%20JavaScript" title="Share on Reddit" target="_blank" class="btn bg-reddit"><i class="fa fa-reddit"></i></a> <a href="https://plus.google.com/share?url=http%3A%2F%2Fschier.co%2Fblog%2F2014%2F12%2F08%2Fwait-for-user-to-stop-typing-using-javascript.html" title="Share on Google Plus" target="_blank" class="btn bg-google-plus"><i class="fa fa-google-plus"></i></a> <a href="http://www.linkedin.com/shareArticle?url=http%3A%2F%2Fschier.co%2Fblog%2F2014%2F12%2F08%2Fwait-for-user-to-stop-typing-using-javascript.html&title=Wait%20for%20User%20to%20Stop%20Typing%2C%20Using%20JavaScript" title="Share on LinkedIn" target="_blank" class="btn bg-linkedin"><i class="fa fa-linkedin"></i></a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fschier.co%2Fblog%2F2014%2F12%2F08%2Fwait-for-user-to-stop-typing-using-javascript.html&title=Wait%20for%20User%20to%20Stop%20Typing%2C%20Using%20JavaScript" title="Share on StumbleUpon" target="_blank" class="btn bg-stumbleupon"><i class="fa fa-stumbleupon"></i></a> <a href="http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fschier.co%2Fblog%2F2014%2F12%2F08%2Fwait-for-user-to-stop-typing-using-javascript.html" title="Share on Facebook" target="_blank" class="btn bg-facebook"><i class="fa fa-facebook"></i></a> <a href="mailto:?subject=Wait%20for%20User%20to%20Stop%20Typing%2C%20Using%20JavaScript&body=http%3A%2F%2Fschier.co%2Fblog%2F2014%2F12%2F08%2Fwait-for-user-to-stop-typing-using-javascript.html" title="Share by Email" target="_blank" class="btn bg-email"><i class="fa fa-envelope"></i></a></span></div><hr><div class="row"><div class="col-sm-4"><p><img src="http:/images/me.jpg" class="round me" alt="Gregory Schier"></p></div><div class="col-sm-8"><h1>Written by Gregory Schier</h1><p>I'm a software engineer living in Victoria BC, Canada. I love building things. I am currently the Lead Engineer at <a href="https://www.sendwithus.com">sendwithus</a>. <i class="fa fa-laptop"></i></p><span class="social"><a href="https://twitter.com/gregoryschier" title="Gregory Schier Twitter" style="" target="_blank"><i class="fa fa-twitter-square"></i></a> <a href="https://plus.google.com/102509209246537377732?rel=author" title="Gregory Schier Google Plus" style="" target="_blank"><i class="fa fa-google-plus-square"></i></a> <a href="http://www.linkedin.com/profile/view?id=180332858" title="Gregory Schier LinkedIn" style="" target="_blank"><i class="fa fa-linkedin-square"></i></a> <a href="https://github.com/gschier" title="Gregory Schier Github" style="" target="_blank"><i class="fa fa-github-square"></i></a> <a href="/rss.xml" title="Gregory Schier RSS" style="" target="_blank"><i class="fa fa-rss-square"></i></a></span></div></div></footer></article></div></div></div><div class="container"><div class="row"><div class="col-md-12"><hr><a href="/blog" class="pull-right">View All Posts</a><h2>Popular Blog Posts</h2></div></div><div class="row spaced"><div class="col-sm-4"><a href="/blog/2014/10/22/pure-html-share-buttons.html" title="Pretty HTML Share Buttons" class="no-under"><div class="spaced img-header" style="background-image: url('/images/thumbs/graph.jpg')"></div><h3>Pretty HTML Share Buttons</h3><p class="small">Share buttons are a great way to drive more traffic to a website. Unfortunately, most share buttons social networks provide are ugly...</p><p class="small">Read More <i class="fa fa-arrow-circle-o-right"></i></p></a></div><div class="col-sm-4"><a href="/blog/2013/11/14/method-chaining-in-javascript.html" title="Method Chaining in JavaScript" class="no-under"><div class="spaced img-header" style="background-image: url('/images/thumbs/chain.jpg')"></div><h3>Method Chaining in JavaScript</h3><p class="small">Method chaining is a common pattern in the JavaScript world. This tutorial will provide a brief explanation of what method chaining is...</p><p class="small">Read More <i class="fa fa-arrow-circle-o-right"></i></p></a></div><div class="col-sm-4"><a href="/blog/2013/11/16/creating-pure-css-lightboxes-with-the-target-selector.html" title="Pure CSS Lightboxes With :target" class="no-under"><div class="spaced img-header" style="background-image: url('/images/thumbs/pig.jpg')"></div><h3>Pure CSS Lightboxes With :target</h3><p class="small">This tutorial will show you how to create a JavaScript-free lightbox using CSS only. To accomplish this, we will make use of the :target selector...</p><p class="small">Read More <i class="fa fa-arrow-circle-o-right"></i></p></a></div></div><div class="row spaced"><div class="col-sm-4"><a href="/blog/2014/10/23/creating-a-pure-css-dropdown-using-the-hover-selector.html" title="CSS Dropdown Using :hover" class="no-under"><div class="spaced img-header" style="background-image: url('/images/thumbs/code.jpg')"></div><h3>CSS Dropdown Using :hover</h3><p class="small">In this tutorial we're going to be building a basic dropdown button. Here's a peak at what the final result will look like. Let's get started...</p><p class="small">Read More <i class="fa fa-arrow-circle-o-right"></i></p></a></div><div class="col-sm-4"><a href="/blog/2014/03/01/clicky-3d-buttons-with-css.html" title="Clicky 3D Buttons with CSS" class="no-under"><div class="spaced img-header" style="background-image: url('/images/thumbs/mouse.jpg')"></div><h3>"Clicky" 3D Buttons with CSS</h3><p class="small">There are two main components to creating these buttons. The first component is creating the bottom edge, and the second component is...</p><p class="small">Read More <i class="fa fa-arrow-circle-o-right"></i></p></a></div><div class="col-sm-4"><a href="/blog/2013/11/09/how-to-root-nexus-5-in-linux.html" title="How to Root Nexus 5 in Linux" class="no-under"><div class="spaced img-header" style="background-image: url('/images/thumbs/nexus.jpg')"></div><h3>How to Root Nexus 5 in Linux</h3><p class="small">I just bought a Nexus 5 today and wanted to root it. I tried running the following script without success. I kept getting the following error...</p><p class="small">Read More <i class="fa fa-arrow-circle-o-right"></i></p></a></div></div><div class="row"><div class="col-sm-12"><p class="small">Check out more of my posts by visiting my <a href="/blog">Blog Archive</a>.</p></div></div><div class="row"><div class="small text-center col-sm-12"><hr><p><form id="registration-form"><input type="email" class="form-control" id="registration-email" placeholder="me@domain.com" required><button type="submit" id="registration-button">Keep Me Posted!</button></form>© 2014, Gregory Schier<br><a href="/rss.xml">rss feed</a></p></div></div></div></div></div><script src="/scripts/main.js"></script></body></html>